<!DOCTYPE html>
<html>
<head>
    <title>GeoJSON Search Tool</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-search/dist/leaflet-search.min.css" />
    <style>
        #map { height: 600px; }
    </style>
</head>
<body>
    <div id="map"></div>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-search/dist/leaflet-search.min.js"></script>
    <script>
        // إنشاء الخريطة
        var map = L.map('map').setView([31.95, 35.2], 13);

        // إضافة طبقة الأساس
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19
        }).addTo(map);

        // بيانات GeoJSON (استبدل 'your_geojson_file.geojson' بالملف الفعلي)
        var geojsonLayer = L.geoJson(null, {
            onEachFeature: function (feature, layer) {
                layer.bindPopup(feature.properties.NAME_AR || "No name");
            }
        }).addTo(map);

        // تحميل بيانات GeoJSON
        fetch('your_geojson_file.geojson')
            .then(response => response.json())
            .then(data => geojsonLayer.addData(data));

        // إضافة أداة البحث
        var searchControl = new L.Control.Search({
            layer: geojsonLayer,
            propertyName: 'NAME_AR', // الحقل الذي ترغب في البحث عنه
            marker: false,
            moveToLocation: function (latlng, title, map) {
                map.setView(latlng, 15); // تكبير الخريطة عند العثور على نتيجة
            }
        });

        searchControl.on('search:locationfound', function(e) {
            e.layer.setStyle({fillColor: '#3f0', color: '#0f0'});
            if (e.layer._popup)
                e.layer.openPopup();
        }).on('search:collapsed', function(e) {
            geojsonLayer.eachLayer(function(layer) {  // إعادة تعيين نمط الطبقة
                geojsonLayer.resetStyle(layer);
            });
        });

        map.addControl(searchControl); // إضافة أداة البحث إلى الخريطة
    </script>
</body>
</html>
