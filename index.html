<!DOCTYPE html>
<html>
<head>
   <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapping Emergency Centers in Ramallah city</title>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <!-- Leaflet plugins CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-search/dist/leaflet-search.min.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-measure/dist/leaflet-measure.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-sidebar/src/L.Control.Sidebar.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-draw/dist/leaflet.draw.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.locatecontrol/dist/L.Control.Locate.min.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css" />
    <!-- Custom CSS -->
    <style>
        /* Map container styling */
        #map { 
            height: 100vh; /* Full viewport height */
        }

        /* Legend styling */
        .legend { 
            background: white; 
            line-height: 1.5em;
            padding: 6px 8px;
            font: 14px/16px Arial, Helvetica, sans-serif;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            border-radius: 5px;
        }

        /* Search control styling */
        .leaflet-control-search {
            border-radius: 5px;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
        }

        /* Scale control styling */
        .leaflet-control-scale {
            position: absolute;
            bottom: 50px;
            left: 50px;
            padding: 5px 10px;
            background-color: rgba(255, 255, 255, 0.8);
            border: 2px solid #777;
            border-radius: 5px;
        }

        /* North arrow styling */
        .leaflet-control-northarrow {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            background-image: url('https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/north_arrow.svg');
            background-size: cover;
            cursor: pointer;
            z-index: 1000; /* Ensure the arrow is above other controls */
        }

        /* Sidebar styling */
        .sidebar {
            background: white;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            padding: 10px;
            width: 300px;
            height: 100%;
            overflow-y: auto;
            display: none; /* Initially hide sidebar */
        }

        .sidebar.active {
            display: block; /* Show sidebar when active */
        }

        .sidebar-header {
            border-bottom: 1px solid #ccc;
            margin-bottom: 10px;
            padding-bottom: 10px;
        }

        .sidebar-content {
            margin-bottom: 10px;
        }

        /* Sidebar toggle button styling */
        .sidebar-toggle {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #fff;
            padding: 5px 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            cursor: pointer;
            z-index: 1000;
        }

        /* Locate user control styling */
        .leaflet-control-locate {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: #fff;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            cursor: pointer;
            z-index: 1000;
        }
        body {
            margin: 0;
            font-family: Arial, sans-serif;
        }
        .header {
            background-color: #007BFF; /* لون أزرق */
            color: white;
            padding:40px;
            display: flex;
            align-items: center;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            
        }
        .header img {
            max-height: 40px; /* حجم الصورة */
            margin-right: 100px;
        }
         .header h1 {
            margin: 0;
        }
        .content {
            padding-top: 120px; /* إضافة مساحة كافية أعلى المحتوى لتجنب التداخل مع الهيدر الثابت */
        }
    </style>
    
</head>
    <body>
        <div class="header">
        <img src="https://www.marefa.org/w/images/thumb/1/16/Birzeit_University_logo.svg/600px-Birzeit_University_logo.svg.png" alt="Birzeit University Logo">
        <h1>Mapping Emergency Centers in Ramallah city</h1>
    </div>
    <div class="content">
    <!-- Map container -->
    <div id="map"></div>
    
    <!-- North arrow control -->
    <div class="leaflet-control-northarrow" title="North"></div>
    
    <!-- Sidebar -->
    <div id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <h3>Categories</h3>
            <p>Mapping Emergency Centers in Ramallah city</p>
        </div>
        <div class="sidebar-content">
            <input type="checkbox" id="toggleHospitals" checked>
            <label for="toggleHospitals">Hospitals</label><br>
            <input type="checkbox" id="toggleCivil" checked>
            <label for="toggleCivil">Civil Defense Centers</label><br>
            <input type="checkbox" id="togglePharmacies" checked>
            <label for="togglePharmacies">Pharmacies</label><br>
            <input type="checkbox" id="togglePolice" checked>
            <label for="togglePolice">Police Stations</label><br>
            <input type="checkbox" id="toggleZones" checked>
            <label for="toggleZones">Ramallah Zones</label><br>
            <label for="destination">Destination:</label><br>
            <input type="text" id="destination" placeholder="Enter coordinates (lat, lng)"><br>
        </div>
    </div>
    
    <!-- Coordinates display -->
    <div id="coordinates" style="position: absolute; bottom: 10px; left: 10px;"></div>
    
    <!-- Locate user control -->
    <div id="locateUser" class="leaflet-control-locate" title="Locate user"></div>
    
    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <!-- Leaflet plugins JavaScript -->
    <script src="https://unpkg.com/leaflet-search/dist/leaflet-search.min.js"></script>
    <script src="https://rawgit.com/rowanwins/leaflet-easyPrint/gh-pages/dist/bundle.js"></script>
    <script src="https://unpkg.com/leaflet-measure/dist/leaflet-measure.js"></script>
    <script src="https://unpkg.com/leaflet-draw/dist/leaflet.draw.js"></script>
    <script src="https://unpkg.com/leaflet.locatecontrol/dist/L.Control.Locate.min.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>
    <!-- Custom JavaScript -->
    <script>
        var map = L.map('map').setView([31.95, 35.2], 12);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 20
        }).addTo(map);

        // Define custom icons
        var hospitalIcon = L.icon({
            iconUrl: 'C:/Users/ASUS/Downloads/home_health_24dp_FILL0_wght400_GRAD0_opsz24%20(1).svg',
            iconSize: [25, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34]
        });

        var civilIcon = L.icon({
            iconUrl: '<svg xmlns="http://www.w3.org/2000/svg" height="40px" viewBox="0 -960 960 960" width="40px" fill="#5f6368"><path d="M280-120q-50 0-85-35t-35-85h-53.33q-27.5 0-47.09-19.58Q40-279.17 40-306.67V-520h440v-173.33q0-27.5 19.58-47.09Q519.17-760 546.67-760h100v-46.67q0-14.16 9.58-23.75Q665.83-840 680-840h40q14.17 0 23.75 9.58 9.58 9.59 9.58 23.75V-760H792q21.67 0 39.17 12.45 17.5 12.46 24.16 33.22L916.67-531q2 5.33 2.66 10.53.67 5.2.67 10.8V-240H800q0 50-35 85t-85 35q-50 0-85-35t-35-85H400q0 50-35 85t-85 35Zm0-66.67q22.67 0 38-15.33 15.33-15.33 15.33-38T318-278q-15.33-15.33-38-15.33T242-278q-15.33 15.33-15.33 38T242-202q15.33 15.33 38 15.33Zm400 0q22.67 0 38-15.33 15.33-15.33 15.33-38T718-278q-15.33-15.33-38-15.33T642-278q-15.33 15.33-15.33 38T642-202q15.33 15.33 38 15.33ZM106.67-453.33v146.66H181q16.33-24.33 42.33-38.83T280-360q30.67 0 56.67 14.5T379-306.67h101v-146.66H106.67Zm440 146.66H581q16.33-24.33 42.33-38.83T680-360q30.67 0 56.67 14.5T779-306.67h74.33v-146.66H546.67v146.66Zm0-213.33H850l-58-173.33H546.67V-520ZM40-560v-46.67h40v-106.66H40V-760h400v46.67h-40v106.66h40V-560H40Zm86.67-46.67h90v-106.66h-90v106.66Zm136.66 0h90v-106.66h-90v106.66ZM480-453.33H106.67 480Zm66.67 0h306.66H546.67Z"/></svg>',
            iconSize: [25, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34]
        });

        var pharmacyIcon = L.icon({
            iconUrl: 'file:///C:/Users/ASUS/Downloads/local_pharmacy_40dp_FILL0_wght400_GRAD0_opsz40.svg',
            iconSize: [25, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34]
        });

        var policeIcon = L.icon({
            iconUrl: 'file:///C:/Users/ASUS/Downloads/local_police_24dp_FILL0_wght400_GRAD0_opsz24.svg',
            iconSize: [25, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34]
        });

        // Define GeoJSON layer creation function
        function createGeoJsonLayer(url, icon, fieldName) {
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    var layer = L.geoJSON(data, {
                        pointToLayer: function (feature, latlng) {
                            return L.marker(latlng, { icon: icon });
                        },
                        onEachFeature: function (feature, layer) {
                            if (feature.properties && feature.properties[fieldName]) {
                                layer.bindPopup(feature.properties[fieldName]);
                            }
                        }
                    });

                    map.addLayer(layer);
                });
        }

        // Load GeoJSON files
        createGeoJsonLayer('hospital.geojson', hospitalIcon, 'NAME_AR');
        createGeoJsonLayer('ciivilld.geojson', civilIcon, 'Name');
        createGeoJsonLayer('pharmacy.geojson', pharmacyIcon, 'NAME_AR');
        createGeoJsonLayer('Police.geojson', policeIcon, 'NAME_AR_1');

        // Toggle sidebar
        document.getElementById('sidebarToggle').onclick = function () {
            var sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('active');
        };

        // North arrow click event
        document.querySelector('.leaflet-control-northarrow').onclick = function () {
            map.setView([31.95, 35.2], 12);
        };

        // Locate user control click event
        document.getElementById('locateUser').onclick = function () {
            map.locate({ setView: true, maxZoom: 16 });
        };

        // Map location found event
        map.on('locationfound', function (e) {
            L.marker(e.latlng).addTo(map)
                .bindPopup("You are here!").openPopup();
        });

        // Map location error event
        map.on('locationerror', function (e) {
            alert(e.message);
        });

        // Map click event to display coordinates
        map.on('click', function (e) {
            var latlng = e.latlng;
            var coordinates = "Latitude: " + latlng.lat + ", Longitude: " + latlng.lng;
            document.getElementById('coordinates').innerHTML = coordinates;
        });

        // Legend
        var legend = L.control({ position: 'bottomright' });

        legend.onAdd = function () {
            var div = L.DomUtil.create('div', 'legend');
            div.innerHTML += "<h4>Legend</h4>";
            div.innerHTML += '<i style="background: red"></i><span>Hospitals</span><br>';
            div.innerHTML += '<i style="background: green"></i><span>Civil Defense</span><br>';
            div.innerHTML += '<i style="background: yellow"></i><span>Pharmacies</span><br>';
            div.innerHTML += '<i style="background: blue"></i><span>Police Stations</span><br>';
            return div;
        };

        legend.addTo(map);
    </script>
    </div>
</body>
</html>
